<div class="row">
  <div class="col-lg-12">
    <nb-card>
      <nb-card-header>
        <h4>{{ isEditing ? 'Editar Cliente' : 'Nuevo Cliente' }}</h4>
      </nb-card-header>
      <nb-card-body>
        <form [formGroup]="clienteForm" (ngSubmit)="guardarCliente()">
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="nombre">Nombre</label>
                <input 
                  nbInput 
                  id="nombre" 
                  type="text" 
                  formControlName="nombre" 
                  placeholder="Nombre"
                  fullWidth>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="apellido">Apellido</label>
                <input 
                  nbInput 
                  id="apellido" 
                  type="text" 
                  formControlName="apellido" 
                  placeholder="Apellido"
                  fullWidth>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="email">Email</label>
                <input 
                  nbInput 
                  id="email" 
                  type="email" 
                  formControlName="email" 
                  placeholder="Email"
                  fullWidth>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="telefono">Teléfono</label>
                <input 
                  nbInput 
                  id="telefono" 
                  type="tel" 
                  formControlName="telefono" 
                  placeholder="Teléfono"
                  fullWidth>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="documento">Documento</label>
                <input 
                  nbInput 
                  id="documento" 
                  type="text" 
                  formControlName="documento" 
                  placeholder="Número de documento"
                  fullWidth>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="fechaNacimiento">Fecha de Nacimiento</label>
                <input 
                  nbInput 
                  id="fechaNacimiento" 
                  type="date" 
                  formControlName="fechaNacimiento" 
                  fullWidth>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div class="form-group">
                <label for="direccion">Dirección</label>
                <input 
                  nbInput 
                  id="direccion" 
                  type="text" 
                  formControlName="direccion" 
                  placeholder="Dirección completa"
                  fullWidth>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="ciudad">Ciudad</label>
                <input 
                  nbInput 
                  id="ciudad" 
                  type="text" 
                  formControlName="ciudad" 
                  placeholder="Ciudad"
                  fullWidth>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="codigoPostal">Código Postal</label>
                <input 
                  nbInput 
                  id="codigoPostal" 
                  type="text" 
                  formControlName="codigoPostal" 
                  placeholder="Código postal"
                  fullWidth>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <button 
                nbButton 
                type="submit" 
                status="primary" 
                [disabled]="!clienteForm.valid">
                <nb-icon icon="save-outline"></nb-icon>
                {{ isEditing ? 'Actualizar' : 'Guardar' }} Cliente
              </button>
              
              <button 
                *ngIf="isEditing"
                nbButton 
                type="button" 
                status="basic"
                (click)="cancelarEdicion()">
                <nb-icon icon="close-outline"></nb-icon>
                Cancelar
              </button>
            </div>
          </div>
        </form>
      </nb-card-body>
    </nb-card>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <nb-card>
      <nb-card-header>
        <h4>Lista de Clientes</h4>
      </nb-card-header>
      <nb-card-body>
        <table class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombre Completo</th>
              <th>Email</th>
              <th>Teléfono</th>
              <th>Documento</th>
              <th>Edad</th>
              <th>Ciudad</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let cliente of clientes">
              <td>{{ cliente.id }}</td>
              <td>{{ getNombreCompleto(cliente) }}</td>
              <td>{{ cliente.email }}</td>
              <td>{{ cliente.telefono }}</td>
              <td>{{ cliente.documento }}</td>
              <td>{{ getEdad(cliente.fechaNacimiento) }} años</td>
              <td>{{ cliente.ciudad }}</td>
              <td>
                <button 
                  nbButton 
                  size="small" 
                  status="info"
                  (click)="editarCliente(cliente)">
                  <nb-icon icon="edit-outline"></nb-icon>
                </button>
                
                <button 
                  nbButton 
                  size="small" 
                  status="danger"
                  (click)="eliminarCliente(cliente.id)">
                  <nb-icon icon="trash-2-outline"></nb-icon>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </nb-card-body>
    </nb-card>
  </div>
</div>
